<html>
<head>
    <meta charset="utf-8">
    <style>
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
        #button {
            padding: 16px;
        }
        #text {
            margin-top: 16px;
        }
    </style>
    <script>
        function getCode() {
            const button = document.getElementById("button");
            button.disabled = true;
            const text = document.getElementById("text");
            text.textContent = "Loading..."
            const timeInSec = randomInt(30, 40);
            fetch('https://vill.pokatut.ru/api/game_code', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({"time":`00:${timeInSec}`})
            })
                .then(response => response.json())
                .then(data => {
                    button.disabled = false;
                    text.textContent = data.promo_code;
                })
                .catch((error) => {
                    button.disabled = false;
                    text.textContent = "Error: " + error;
                });
        }

        function randomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
    </script>
</head>
<body>
    <div class="container">
        <button id="button" onclick="getCode()">Get Promo Code</button>
        <div id="text">¯\_(ツ)_/¯</div>
    </div>
</body>
</html>
